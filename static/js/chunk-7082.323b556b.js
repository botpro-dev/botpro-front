(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7082"],{"/h46":function(t,e,a){a("cHUd")("Map")},"0shQ":function(t,e,a){"use strict";a.r(e);var n=a("14Xm"),r=a.n(n),i=a("D3Ub"),o=a.n(i),s=a("ODRq"),c=a.n(s),l=a("ZySA"),u=a("KTTK"),d=a("Mz3J"),p=a("8jZJ"),m=a("t3Un");function f(t,e,a){return Object(m.a)({url:"branch-items",method:"GET",params:{ownerId:t,branchId:e,itemParentId:a}})}var h=a("Q2AE"),b={name:"ComplexTable",components:{Pagination:d.a},directives:{waves:l.a},props:{branchId:{type:String,default:null}},data:function(){return{selectedImageName:"",statusList:{ACTIVE:{name:this.$t("table.statusType.active"),type:"success"},DELETED:{name:this.$t("table.statusType.deleted"),type:"success"},DISABLED:{name:this.$t("table.statusType.disabled"),type:"info"}},textMap:{update:this.$t("table.edit"),create:this.$t("table.add")},dialogData:{branchItemId:"",oldPrice:"",price:""},tableKey:0,tableData:null,total:0,dialogStatus:"",languagesList:[],languagesMap:new c.a,itemParentId:this.$route.query&&this.$route.query.itemParentId,breadcrubms:[{name:this.$t("item.parent"),id:void 0}],branchItems:[],dialogFormVisible:!1,buttonLoading:!1,buttonDisabled:!0,tableLoading:!0}},created:function(){var t=this;return o()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.getOwnerId()){e.next=5;break}return t.listLoading=!1,t.$router.push("/users/index"),t.$message({showClose:!0,message:t.$t("notification.pleaseSelectOwner"),type:"error"}),e.abrupt("return");case 5:return t.tableLoading=!0,e.next=8,t.init();case 8:return e.next=10,t.fillTable();case 10:t.tableLoading=!1;case 11:case"end":return e.stop()}},e,t)}))()},methods:{getOwnerId:function(){return h.a.getters.ownerId},getitemParentId:function(){return this.itemParentId},init:function(){var t=this;return o()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(t.getOwnerId()).then(function(e){t.languagesList=e.data.payload.languages,t.languagesList.forEach(function(e){t.languagesMap.set(e.code,e)})});case 2:case"end":return e.stop()}},e,t)}))()},fillTable:function(){var t=this;return o()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.c)(t.getOwnerId(),t.getitemParentId()).then(function(e){t.tableData=e.data.payload.items,t.fillBreadCrumb(e.data.payload.ancestors)});case 2:return e.next=4,f(t.getOwnerId(),t.branchId,t.getitemParentId()).then(function(e){var a=e.data.payload.branchItems;t.branchItems=a,a.forEach(function(e){var a=t.tableData.find(function(t){return t.id===e.itemId});t.$refs.singleTable.toggleRowSelection(a),a.isSelected=!0,a.branchId=e.id,a.branchItemId=e.id})});case 4:case"end":return e.stop()}},e,t)}))()},fillBreadCrumb:function(t){var e=this,a=t.ids,n=t.items;a.forEach(function(t){var a=n.find(function(e){return e.id===t});e.breadcrubms.push({id:t,name:a.name})})},handleClickItem:function(t){"ITEM"!==t.typeCode&&this.$router.push({name:"BranchDetail",query:{itemParentId:t.id}})},handleBreadcrumbClick:function(t){this.$router.push({name:"BranchDetail",query:{itemParentId:t.id}})},save:function(){var t=[],e=this.$refs.singleTable.selection;this.tableData.forEach(function(a){e.includes(a)?t.push({id:a.id,branchId:a.branchId,itemId:a.itemId,isSelected:!0}):t.push({id:a.id,branchId:a.branchId,itemId:a.itemId,isSelected:!1})}),this.buttonLoading=!0},handleSelection:function(t,e){var a={branchId:this.branchId,itemId:e.id,price:e.price,oldPrice:e.price};return!0===e.isSelected?function(t,e){return Object(m.a)({url:"branch-items/"+e,method:"DELETE",params:{ownerId:t}})}(this.getOwnerId(),e.branchId).then(function(){e.isSelected=!1}):function(t,e){return Object(m.a)({url:"branch-items",method:"POST",params:{ownerId:t},data:e})}(this.getOwnerId(),a).then(function(){e.isSelected=!0})},handleUpdate:function(t){this.dialogFormVisible=!0,this.resetDialogData();var e=this.branchItems.find(function(e){return e.itemId===t.id});this.dialogData.branchItemId=e.id,this.dialogData.oldPrice=e.oldPrice,this.dialogData.price=e.price},update:function(t){var e=this;(function(t,e,a){return Object(m.a)({url:"branch-items/"+e,method:"PUT",params:{ownerId:t},data:a})})(this.getOwnerId(),this.dialogData.branchItemId,this.dialogData).then(function(t){200===t.data.code&&(e.$notify({title:e.$t("notification.success"),message:e.$t("branch.branchItemUpdateSuccess"),type:"success",duration:2e3}),e.dialogFormVisible=!1,e.fillTable())})},resetDialogData:function(){this.dialogData={oldPrice:"",price:""}}}},g=(a("u4LV"),a("KHd+")),v=Object(g.a)(b,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"branch-item"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.$t("branch.items")))])]),t._v(" "),a("div",{staticClass:"filter-container"}),t._v(" "),a("el-breadcrumb",{staticStyle:{"margin-bottom":"15px"},attrs:{"separator-class":"el-icon-arrow-right"}},t._l(t.breadcrubms,function(e){return a("el-breadcrumb-item",{key:e.id},[a("el-link",{attrs:{type:"primary"},on:{click:function(a){t.handleBreadcrumbClick(e)}}},[t._v(t._s(e.name))])],1)})),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],key:t.tableKey,ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,size:"mini",border:"",fit:"","highlight-current-row":""},on:{select:t.handleSelection}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.attribute.no"),prop:"no",sortable:"custom",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.no))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.attribute.name"),prop:"name",sortable:"custom",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["CATEGORY"===e.row.typeCode?a("span",{staticStyle:{color:"blue"}},[a("router-link",{attrs:{to:{name:"BranchDetail",query:{itemParentId:e.row.id}}}},[a("el-link",{attrs:{type:"primary"}},[t._v("[ "+t._s(e.row.name)+" ]")])],1)],1):t._e(),t._v(" "),"ITEM"===e.row.typeCode?a("span",[t._v(t._s(e.row.name))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.status"),prop:"name",sortable:"custom",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.statusList[e.row.statusCode].type,size:"mini"}},[a("span",[t._v(t._s(t.statusList[e.row.statusCode].name))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("table.actions"),align:"center",width:"200px","class-name":"small-padding cell-actions"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:"/items/"+e.row.id+"/detail"}},[a("el-button",{attrs:{size:"mini",icon:"el-icon-view",type:"info"}})],1),t._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(a){t.handleUpdate(e.row)}}})]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"postedFormData",staticStyle:{margin:"0 50px"},attrs:{model:t.postedFormData,"label-position":"left","label-width":"150px"}},[a("el-form-item",{attrs:{label:"Old price"}},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:t.dialogData.oldPrice,callback:function(e){t.$set(t.dialogData,"oldPrice",e)},expression:"dialogData.oldPrice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"New price"}},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:t.dialogData.price,callback:function(e){t.$set(t.dialogData,"price",e)},expression:"dialogData.price"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("table.cancel")))]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{loading:t.createButtonLoading,type:"primary"},on:{click:function(e){t.update()}}},[t._v(t._s(t.$t("table.confirm")))])],1)],1)],1)},[],!1,null,null,null);v.options.__file="BranchItems.vue";var w=v.exports,I=a("lelH"),y={name:"BranchDetail",components:{Pagination:d.a,BranchItems:w},directives:{waves:l.a},data:function(){return{isLoading:"",branchId:this.$route.params&&this.$route.params.branchId,tempData:{imageUrl:"",selectedLanguages:[],translations:{name:{}}},languagesMap:new c.a,selectedImageName:"",postedFormData:{},tableKey:0,branchData:{},total:0,dialogFormVisible:!1,dialogStatus:"",parentId:this.$route.query&&this.$route.query.parentId}},created:function(){var t=this;return o()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.getOwnerId()){e.next=5;break}return t.listLoading=!1,t.$router.push("/users/index"),t.$message({showClose:!0,message:t.$t("notification.pleaseSelectOwner"),type:"error"}),e.abrupt("return");case 5:return t.isLoading=!0,e.next=8,t.init();case 8:return e.next=10,t.fillTable();case 10:t.isLoading=!1;case 11:case"end":return e.stop()}},e,t)}))()},methods:{getOwnerId:function(){return h.a.getters.ownerId},getParentId:function(){return this.parentId},init:function(){var t=this;return o()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(t.getOwnerId()).then(function(e){t.languagesList=e.data.payload.languages,t.languagesList.forEach(function(e){t.languagesMap.set(e.code,e)})});case 2:case"end":return e.stop()}},e,t)}))()},fillTable:function(){var t=this;return Object(I.d)(this.getOwnerId(),this.branchId).then(function(e){t.branchData=e.data.payload.branch})}}},_=Object(g.a)(y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"edit-form-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.$t("branch.detail")))])]),t._v(" "),a("div",{staticClass:"details"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",[t._v(t._s(t.$t("table.attribute.no"))+": ")]),t._v(t._s(t.branchData.no))])]),t._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",[t._v(t._s(t.$t("branch.name"))+": ")]),t._v(t._s(t.branchData.name))])]),t._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",[t._v(t._s(t.$t("table.status"))+": ")]),t._v(" "),a("div",[a("span",[t._v(t._s(t.branchData.statusCode))])])])]),t._v(" "),a("el-col",{attrs:{xs:24,sm:12,md:12,lg:12,xl:8}},[a("div",{staticClass:"grid-content bg-purple"},[a("span",[t._v(t._s(t.$t("branch.createdAt"))+": ")]),t._v(t._s(t.branchData.createdAt))])])],1)],1)]),t._v(" "),a("branch-items",{attrs:{"branch-id":t.branchId}})],1)},[],!1,null,null,null);_.options.__file="BranchDetail.vue";var x={name:"DetailForm",components:{BranchDetail:_.exports}},T=Object(g.a)(x,function(){var t=this.$createElement;return(this._self._c||t)("branch-detail")},[],!1,null,null,null);T.options.__file="detail.vue";e.default=T.exports},"8jZJ":function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"c",function(){return i}),a.d(e,"d",function(){return o}),a.d(e,"e",function(){return s}),a.d(e,"b",function(){return c});var n=a("t3Un");function r(t,e){return Object(n.a)({url:"/items",method:"POST",headers:{"Content-Type":"multipart/form-data"},data:e,params:{ownerId:t}})}function i(t,e){var a=e?{ownerId:t,parentId:e}:{ownerId:t};return Object(n.a)({url:"/items",method:"GET",params:a})}function o(t,e){return Object(n.a)({url:"/items/"+e,method:"GET",params:{ownerId:t}})}function s(t,e){var a=e.get("item"),r=JSON.parse(a).id;return Object(n.a)({url:"/items/"+r,method:"PUT",headers:{"Content-Type":"multipart/form-data"},data:e,params:{ownerId:t}})}function c(t,e){return Object(n.a)({url:"/items/"+e,method:"DELETE",params:{ownerId:t}})}},KTTK:function(t,e,a){"use strict";a.d(e,"e",function(){return r}),a.d(e,"c",function(){return i}),a.d(e,"d",function(){return o}),a.d(e,"b",function(){return s}),a.d(e,"a",function(){return c}),a.d(e,"f",function(){return l});var n=a("t3Un");function r(){return Object(n.a)({url:"/payment-methods",method:"GET"})}function i(){return Object(n.a)({url:"/languages",method:"GET"})}function o(t){return Object(n.a)({url:"/users/"+t+"/languages",method:"GET"})}function s(){return Object(n.a)({url:"/currencies",method:"GET"})}function c(){return Object(n.a)({url:"/countries",method:"GET"})}function l(){return Object(n.a)({url:"time-zones",method:"GET"})}},Mz3J:function(t,e,a){"use strict";Math.easeInOutQuad=function(t,e,a,n){return(t/=n/2)<1?a/2*t*t+e:-a/2*(--t*(t-2)-1)+e};var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function r(t,e,a){var r=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,i=t-r,o=0;e=void 0===e?500:e;!function t(){o+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(o,r,i,e)),o<e?n(t):a&&"function"==typeof a&&a()}()}var i={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&r(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&r(0,800)}}},o=(a("PC8i"),a("KHd+")),s=Object(o.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[a("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},[],!1,null,"4a3e8263",null);s.options.__file="index.vue";e.a=s.exports},ODRq:function(t,e,a){t.exports={default:a("UDep"),__esModule:!0}},PC8i:function(t,e,a){"use strict";var n=a("vYct");a.n(n).a},RZ4f:function(t,e,a){},UDep:function(t,e,a){a("wgeU"),a("FlQf"),a("bBy9"),a("g33z"),a("XLbu"),a("/h46"),a("dVTT"),t.exports=a("WEpk").Map},XLbu:function(t,e,a){var n=a("Y7ZC");n(n.P+n.R,"Map",{toJSON:a("8iia")("Map")})},ZySA:function(t,e,a){"use strict";var n=a("P2sY"),r=a.n(n),i=(a("jUE0"),{bind:function(t,e){t.addEventListener("click",function(a){var n=r()({},e.value),i=r()({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),o=i.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var s=o.getBoundingClientRect(),c=o.querySelector(".waves-ripple");switch(c?c.className="waves-ripple":((c=document.createElement("span")).className="waves-ripple",c.style.height=c.style.width=Math.max(s.width,s.height)+"px",o.appendChild(c)),i.type){case"center":c.style.top=s.height/2-c.offsetHeight/2+"px",c.style.left=s.width/2-c.offsetWidth/2+"px";break;default:c.style.top=(a.pageY-s.top-c.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",c.style.left=(a.pageX-s.left-c.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return c.style.backgroundColor=i.color,c.className="waves-ripple z-active",!1}},!1)}}),o=function(t){t.directive("waves",i)};window.Vue&&(window.waves=i,Vue.use(o)),i.install=o;e.a=i},dVTT:function(t,e,a){a("aPfg")("Map")},g33z:function(t,e,a){"use strict";var n=a("Wu5q"),r=a("n3ko");t.exports=a("raTm")("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(r(this,"Map"),0===t?0:t,e)}},n,!0)},jUE0:function(t,e,a){},lelH:function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"c",function(){return i}),a.d(e,"d",function(){return o}),a.d(e,"e",function(){return s}),a.d(e,"b",function(){return c});var n=a("t3Un");function r(t,e,a){return Object(n.a)({url:"/branches",method:"POST",params:{ownerId:t,companyId:e},data:a})}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=e?{ownerId:t,companyId:e}:{ownerId:t};return Object(n.a)({url:"/branches",method:"GET",params:a})}function o(t,e){return Object(n.a)({url:"/branches/"+e,method:"GET",params:{ownerId:t}})}function s(t,e){return Object(n.a)({url:"/branches/"+e.id,method:"PUT",params:{ownerId:t},data:e})}function c(t,e){return Object(n.a)({url:"/branches/"+e,method:"DELETE",params:{ownerId:t}})}},u4LV:function(t,e,a){"use strict";var n=a("RZ4f");a.n(n).a},vYct:function(t,e,a){}}]);